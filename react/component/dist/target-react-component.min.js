/**
* Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*  http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
"use strict";!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return e.targetState={editMode:e.queryParams.indexOf("mboxEdit")!==-1},t.createElement("div",c({ref:function(t){e.targetDiv=t}},e.props,{className:(0,s.appendMboxClass)(e)}),e.props.children)}function i(t,e){var r=function(e){function r(t){n(this,r);var e=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.at=adobe.target,e.logger=console,e.queryParams=location.search,e}return a(r,e),f(r,[{key:"render",value:function(){return u(t,this)}},{key:"componentDidMount",value:function(){return(0,p.onComponentMounted)(this,this.at,this.logger)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(t){return(0,p.onComponentWillReceiveProps)(this,this.at,this.logger,t)}}]),r}(t.Component);return r.defaultProps=(0,p.getDefaultProps)(e),r}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.default=i;var s=r(1),p=r(28)},function(t,e,r){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.props.className,r=t.props["data-mbox"];return t.targetState.editMode?"mbox-name-"+r:e.indexOf("mboxDefault")===-1?(e?e+" ":"")+"mboxDefault":e}function a(t){return t.replace(/\bmboxDefault\b/,"")}function u(t){t=t||{};var e=null;return Object.keys(t).filter(function(t){return 0===t.indexOf("data-")&&!(0,p.default)(["data-mbox","data-timeout"],t)}).forEach(function(r,n){0===n&&(e={}),e[r.substring(5)]=t[r]}),e}function i(t,e,r,n){var o=t.targetState;return!(0,c.default)(o.atParams,n)||e&&o.mbox!==e||r&&o.timeout!==r}Object.defineProperty(e,"__esModule",{value:!0});var f=r(2),c=n(f),s=r(27),p=n(s);e.appendMboxClass=o,e.removeMboxClass=a,e.getParams=u,e.atOptsHaveChanged=i},function(t,e,r){function n(t,e){return o(t,e)}var o=r(3);t.exports=n},function(t,e,r){function n(t,e,r,u,i){return t===e||(null==t||null==e||!a(t)&&!a(e)?t!==t&&e!==e:o(t,e,r,u,n,i))}var o=r(4),a=r(26);t.exports=n},function(t,e,r){function n(t,e,r,n,b,g){var h=c(t),y=c(e),_=h?d:f(t),O=y?d:f(e);_=_==v?m:_,O=O==v?m:O;var P=_==m,j=O==m,w=_==O;if(w&&s(t)){if(!s(e))return!1;h=!0,P=!1}if(w&&!P)return g||(g=new o),h||p(t)?a(t,e,r,n,b,g):u(t,e,_,r,n,b,g);if(!(r&l)){var M=P&&x.call(t,"__wrapped__"),C=j&&x.call(e,"__wrapped__");if(M||C){var D=M?t.value():t,k=C?e.value():e;return g||(g=new o),b(D,k,r,n,g)}}return!!w&&(g||(g=new o),i(t,e,r,n,b,g))}var o=r(5),a=r(13),u=r(19),i=r(20),f=r(23),c=r(15),s=r(24),p=r(25),l=1,v="[object Arguments]",d="[object Array]",m="[object Object]",b=Object.prototype,x=b.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(6),a=r(7),u=r(10),i=r(11),f=r(12);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=i,n.prototype.set=f,t.exports=n},function(t,e){function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return!(r<0)&&(r==e.length-1?e.pop():u.call(e,r,1),--this.size,!0)}var o=r(8),a=Array.prototype,u=a.splice;t.exports=n},function(t,e,r){function n(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}var o=r(9);t.exports=n},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}var o=r(8);t.exports=n},function(t,e,r){function n(t){return o(this.__data__,t)>-1}var o=r(8);t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(8);t.exports=n},function(t,e,r){function n(t,e,r,n,c,s){var p=r&i,l=t.length,v=e.length;if(l!=v&&!(p&&v>l))return!1;var d=s.get(t);if(d&&s.get(e))return d==e;var m=-1,b=!0,x=r&f?new o:void 0;for(s.set(t,e),s.set(e,t);++m<l;){var g=t[m],h=e[m];if(n)var y=p?n(h,g,m,e,t,s):n(g,h,m,t,e,s);if(void 0!==y){if(y)continue;b=!1;break}if(x){if(!a(e,function(t,e){if(!u(x,e)&&(g===t||c(g,t,r,n,s)))return x.push(e)})){b=!1;break}}else if(g!==h&&!c(g,h,r,n,s)){b=!1;break}}return s.delete(t),s.delete(e),b}var o=r(14),a=r(16),u=r(17),i=1,f=2;t.exports=n},function(t,e,r){function n(){if(!arguments.length)return[];var t=arguments[0];return o(t)?t:[t]}var o=r(15);t.exports=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(18);t.exports=n},function(t,e){function r(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}t.exports=r},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t,e,r,n,u,f){var c=r&a,s=o(t),p=s.length;if(p!=o(e).length&&!c)return!1;for(var l=p;l--;){var v=s[l];if(!(c?v in e:i.call(e,v)))return!1}var d=f.get(t);if(d&&f.get(e))return d==e;var m=!0;f.set(t,e),f.set(e,t);for(var b=c;++l<p;){v=s[l];var x=t[v],g=e[v];if(n)var h=c?n(g,x,v,e,t,f):n(x,g,v,t,e,f);if(!(void 0===h?x===g||u(x,g,r,n,f):h)){m=!1;break}b||(b="constructor"==v)}if(m&&!b){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(m=!1)}return f.delete(t),f.delete(e),m}var o=r(21),a=1,u=Object.prototype,i=u.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(22),o=n(Object.keys,Object);t.exports=o},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e){function r(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(18);t.exports=n},function(t,e,r){function n(t,e,r){e.getOffer({mbox:t.targetState.mbox,params:t.targetState.atParams,timeout:t.targetState.timeout,success:function(r){e.applyOffer({mbox:t.targetState.mbox,offer:r,element:t.targetDiv}),t.targetDiv.className=(0,i.removeMboxClass)(t.targetDiv.className)},error:function(e,n){r.error("getOffer error: ",n,e),t.targetDiv.className=(0,i.removeMboxClass)(t.targetDiv.className)}})}function o(t){return t=t||{},{className:"mboxDefault","data-mbox":t.mbox||"default-mbox","data-timeout":t.timeout||3e3}}function a(t,e,r){var o=t.targetState;if(o.atParams=(0,i.getParams)(t.props),o.mbox=t.props["data-mbox"],o.timeout=parseInt(t.props["data-timeout"],10),"default-mbox"===o.mbox)return void r.error("at-react-component:","mbox prop must be provided for each Target component!");o.editMode||n(t,e,r)}function u(t,e,r,o){var a=o["data-mbox"],u=parseInt(o["data-timeout"],10),f=(0,i.getParams)(o);if((0,i.atOptsHaveChanged)(t,a,u,f)){var c=t.targetState;c.atParams=f||c.atParams,c.mbox=a||c.mbox,c.timeout=u||c.timeout,c.editMode||n(t,e,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOffers=n,e.getDefaultProps=o,e.onComponentMounted=a,e.onComponentWillReceiveProps=u;var i=r(1)}])});