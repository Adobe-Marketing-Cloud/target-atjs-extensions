/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t};!function(t,e){function o(t,e){return{"data-mbox":t.mbox||e.globalMboxName,"data-params":t.params||null,"data-timeout":t.timeout||e.timeout}}function r(t){return(t?t+" ":"")+"mboxDefault"}function n(t){return t.replace(/\bmboxDefault\b/,"")}function a(e){return t.createElement("div",_extends({ref:function(t){e.mboxDiv=t}},e.props,{className:r(e.props.className)}),e.props.children)}function s(t,o){o.log("MboxComponentDidMount"),e.getOffer({mbox:t.props["data-mbox"],params:JSON.parse(t.props["data-params"]),timeout:parseInt(t.props["data-timeout"],10),success:function(e){t.setState({offerData:e})},error:function(e,r){o.log("getOffer error: ",r,e),t.mboxDiv.className=n(t.mboxDiv.className)}})}function i(t,e){e.log("MboxComponentDidUpdate"),adobe.target.applyOffer({mbox:t.props["data-mbox"],offer:t.state.offerData,element:t.mboxDiv}),t.mboxDiv.className=n(t.mboxDiv.className)}e.registerExtension({name:"react.createMboxComponent",modules:["settings","logger"],register:function(e,r){return function(n){return t.createClass({getDefaultProps:function(){return o(n,e)},render:function(){return a(this)},componentDidMount:function(){return s(this,r)},componentDidUpdate:function(){return i(this,r)}})}}})}(React,adobe.target);