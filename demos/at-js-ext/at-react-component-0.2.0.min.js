/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=e(1),a=n(o),u=e(28),i=n(u),f=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};!function(t,r){function e(t){return(t?t+" ":"")+"mboxDefault"}function n(t){return t.replace(/\bmboxDefault\b/,"")}function o(t){t=t||{};var r=null;return Object.keys(t).filter(function(t){return t.startsWith("data-")&&!(0,i.default)(["data-mbox","data-timeout"],t)}).forEach(function(e,n){0===n&&(r={}),r[e.substring(5)]=t[e]}),r}function u(t,r,e,n){return!(0,a.default)(t.state.atParams,n)||r&&t.state.mbox!==r||e&&t.state.timeout!==e}function s(t,e){e.log("getOffers"),r.getOffer({mbox:t.state.mbox,params:t.state.atParams,timeout:t.state.timeout,success:function(r){t.setState({gotOffers:!0,offerData:r})},error:function(r,o){e.error("getOffer error: ",o,r),t.mboxDiv.className=n(t.mboxDiv.className)}})}function c(t){return t=t||{},{atParams:t.params||null}}function p(t,r){return t=t||{},{className:"mboxDefault","data-mbox":t.mbox||r.globalMboxName,"data-timeout":t.timeout||r.timeout}}function l(r){return t.createElement("div",f({ref:function(t){r.mboxDiv=t}},r.props,{className:e(r.props.className)}),r.props.children)}function v(t,r){r.log("MboxComponentDidMount"),t.setState({atParams:o(t.props),mbox:t.props["data-mbox"],timeout:parseInt(t.props["data-timeout"],10),shouldRefresh:!0})}function d(t,r){var e=r["data-mbox"],n=parseInt(r["data-timeout"],10),a=o(r);u(t,e,n,a)&&t.setState({atParams:a||t.state.atParams,mbox:e||t.state.mbox,timeout:n||t.state.timeout,shouldRefresh:!0})}function x(t,r){r.log("MboxComponentDidUpdate"),t.state&&(t.state.gotOffers&&(r.log("Applying"),adobe.target.applyOffer({mbox:t.state.mbox,offer:t.state.offerData,element:t.mboxDiv}),t.mboxDiv.className=n(t.mboxDiv.className),t.setState({gotOffers:!1})),t.state.shouldRefresh&&(r.log("Refreshing"),s(t,r),t.setState({shouldRefresh:!1})))}r.registerExtension({name:"react.createMboxComponent",modules:["settings","logger"],register:function(r,e){return function(n){return t.createClass({getInitialState:function(){return c(n)},getDefaultProps:function(){return p(n,r)},render:function(){return l(this)},componentDidMount:function(){return v(this,e)},componentWillReceiveProps:function(t){return d(this,t)},componentDidUpdate:function(){return x(this,e)}})}}})}(React,adobe.target)},function(t,r,e){function n(t,r){return o(t,r)}var o=e(2);t.exports=n},function(t,r,e){function n(t,r,e,i,f){return t===r||(null==t||null==r||!a(t)&&!u(r)?t!==t&&r!==r:o(t,r,n,e,i,f))}var o=e(3),a=e(26),u=e(27);t.exports=n},function(t,r,e){function n(t,r,e,n,m,b){var _=s(t),g=s(r),y=d,O=d;_||(y=f(t),y=y==v?x:y),g||(O=f(r),O=O==v?x:O);var D=y==x&&!c(t),j=O==x&&!c(r),P=y==O;if(P&&!D)return b||(b=new o),_||p(t)?a(t,r,e,n,m,b):u(t,r,y,e,n,m,b);if(!(m&l)){var w=D&&h.call(t,"__wrapped__"),N=j&&h.call(r,"__wrapped__");if(w||N){var M=w?t.value():t,R=N?r.value():r;return b||(b=new o),e(M,R,n,m,b)}}return!!P&&(b||(b=new o),i(t,r,e,n,m,b))}var o=e(4),a=e(12),u=e(18),i=e(19),f=e(22),s=e(23),c=e(24),p=e(25),l=2,v="[object Arguments]",d="[object Array]",x="[object Object]",m=Object.prototype,h=m.hasOwnProperty;t.exports=n},function(t,r,e){function n(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}var o=e(5),a=e(6),u=e(9),i=e(10),f=e(11);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=i,n.prototype.set=f,t.exports=n},function(t,r){function e(){this.__data__=[]}t.exports=e},function(t,r,e){function n(t){var r=this.__data__,e=o(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():u.call(r,e,1),!0}var o=e(7),a=Array.prototype,u=a.splice;t.exports=n},function(t,r,e){function n(t,r){for(var e=t.length;e--;)if(o(t[e][0],r))return e;return-1}var o=e(8);t.exports=n},function(t,r){function e(t,r){return t===r||t!==t&&r!==r}t.exports=e},function(t,r,e){function n(t){var r=this.__data__,e=o(r,t);return e<0?void 0:r[e][1]}var o=e(7);t.exports=n},function(t,r,e){function n(t){return o(this.__data__,t)>-1}var o=e(7);t.exports=n},function(t,r,e){function n(t,r){var e=this.__data__,n=o(e,t);return n<0?e.push([t,r]):e[n][1]=r,this}var o=e(7);t.exports=n},function(t,r,e){function n(t,r,e,n,f,s){var c=f&i,p=t.length,l=r.length;if(p!=l&&!(c&&l>p))return!1;var v=s.get(t);if(v&&s.get(r))return v==r;var d=-1,x=!0,m=f&u?new o:void 0;for(s.set(t,r),s.set(r,t);++d<p;){var h=t[d],b=r[d];if(n)var _=c?n(b,h,d,r,t,s):n(h,b,d,t,r,s);if(void 0!==_){if(_)continue;x=!1;break}if(m){if(!a(r,function(t,r){if(!m.has(r)&&(h===t||e(h,t,n,f,s)))return m.add(r)})){x=!1;break}}else if(h!==b&&!e(h,b,n,f,s)){x=!1;break}}return s.delete(t),s.delete(r),x}var o=e(13),a=e(17),u=1,i=2;t.exports=n},function(t,r,e){function n(t){var r=-1,e=t?t.length:0;for(this.__data__=new o;++r<e;)this.add(t[r])}var o=e(14),a=e(15),u=e(16);n.prototype.add=n.prototype.push=a,n.prototype.has=u,t.exports=n},function(t,r,e){function n(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}var o=e(5),a=e(6),u=e(9),i=e(10),f=e(11);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=i,n.prototype.set=f,t.exports=n},function(t,r){function e(t){return this.__data__.set(t,n),this}var n="__lodash_hash_undefined__";t.exports=e},function(t,r){function e(t){return this.__data__.has(t)}t.exports=e},function(t,r){function e(t,r){for(var e=-1,n=t?t.length:0;++e<n;)if(r(t[e],e,t))return!0;return!1}t.exports=e},function(t,r){function e(t,r){return t===r||t!==t&&r!==r}t.exports=e},function(t,r,e){function n(t,r,e,n,u,f){var s=u&a,c=o(t),p=c.length,l=o(r),v=l.length;if(p!=v&&!s)return!1;for(var d=p;d--;){var x=c[d];if(!(s?x in r:i.call(r,x)))return!1}var m=f.get(t);if(m&&f.get(r))return m==r;var h=!0;f.set(t,r),f.set(r,t);for(var b=s;++d<p;){x=c[d];var _=t[x],g=r[x];if(n)var y=s?n(g,_,x,r,t,f):n(_,g,x,t,r,f);if(!(void 0===y?_===g||e(_,g,n,u,f):y)){h=!1;break}b||(b="constructor"==x)}if(h&&!b){var O=t.constructor,D=r.constructor;O!=D&&"constructor"in t&&"constructor"in r&&!("function"==typeof O&&O instanceof O&&"function"==typeof D&&D instanceof D)&&(h=!1)}return f.delete(t),f.delete(r),h}var o=e(20),a=2,u=Object.prototype,i=u.hasOwnProperty;t.exports=n},function(t,r,e){var n=e(21),o=n(Object.keys,Object);t.exports=o},function(t,r){function e(t,r){return function(e){return t(r(e))}}t.exports=e},function(t,r){function e(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=e},function(t,r){var e=Array.isArray;t.exports=e},function(t,r){function e(){return!1}t.exports=e},function(t,r){function e(){return!1}t.exports=e},function(t,r){function e(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=e},function(t,r){function e(t){return!!t&&"object"==typeof t}t.exports=e},function(t,r,e){function n(t,r){var e=t?t.length:0;return!!e&&o(t,r,0)>-1}var o=e(29);t.exports=n},function(t,r,e){function n(t,r,e){if(r!==r)return o(t,a,e);for(var n=e-1,u=t.length;++n<u;)if(t[n]===r)return n;return-1}var o=e(30),a=e(31);t.exports=n},function(t,r){function e(t,r,e,n){for(var o=t.length,a=e+(n?1:-1);n?a--:++a<o;)if(r(t[a],a,t))return a;return-1}t.exports=e},function(t,r){function e(t){return t!==t}t.exports=e}]);