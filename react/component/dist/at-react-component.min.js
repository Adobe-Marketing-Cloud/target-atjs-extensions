/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.props.className,r=t.props["data-mbox"];return t.atState.editMode?"mbox-name-"+r:e.indexOf("mboxDefault")===-1?(e?e+" ":"")+"mboxDefault":e}function a(t){return t.replace(/\bmboxDefault\b/,"")}function u(t){t=t||{};var e=null;return Object.keys(t).filter(function(t){return t.startsWith("data-")&&!(0,b.default)(["data-mbox","data-timeout"],t)}).forEach(function(r,n){0===n&&(e={}),e[r.substring(5)]=t[r]}),e}function i(t,e,r,n){var o=t.atState;return!(0,d.default)(o.atParams,n)||e&&o.mbox!==e||r&&o.timeout!==r}function f(t,e,r){r.log("getOffers"),e.getOffer({mbox:t.atState.mbox,params:t.atState.atParams,timeout:t.atState.timeout,success:function(n){r.log("Applying"),e.applyOffer({mbox:t.atState.mbox,offer:n,element:t.mboxDiv}),t.mboxDiv.className=a(t.mboxDiv.className)},error:function(e,n){r.error("getOffer error: ",n,e),t.mboxDiv.className=a(t.mboxDiv.className)}})}function c(t){return t=t||{},{className:"mboxDefault","data-mbox":t.mbox||"target-global-mbox","data-timeout":t.timeout||3e3}}function s(t,e,r){return e.atState={editMode:r.indexOf("mboxEdit")!==-1},t.createElement("div",h({ref:function(t){e.mboxDiv=t}},e.props,{className:o(e)}),e.props.children)}function p(t,e,r){r.log("MboxComponentDidMount");var n=t.atState;n.atParams=u(t.props),n.mbox=t.props["data-mbox"],n.timeout=parseInt(t.props["data-timeout"],10),n.editMode||f(t,e,r)}function l(t,e,r,n){var o=n["data-mbox"],a=parseInt(n["data-timeout"],10),c=u(n);if(i(t,o,a,c)){var s=t.atState;s.atParams=c||s.atParams,s.mbox=o||s.mbox,s.timeout=a||s.timeout,s.editMode||f(t,e,r)}}function v(t,e){var r=adobe.target,n=console,o=location.search;return t.createClass({getDefaultProps:function(){return c(e)},render:function(){return s(t,this,o)},componentDidMount:function(){return p(this,r,n)},shouldComponentUpdate:function(){return!1},componentWillReceiveProps:function(t){return l(this,r,n,t)}})}Object.defineProperty(e,"__esModule",{value:!0});var x=r(1),d=n(x),m=r(26),b=n(m),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.default=v},function(t,e,r){function n(t,e){return o(t,e)}var o=r(2);t.exports=n},function(t,e,r){function n(t,e,r,u,i){return t===e||(null==t||null==e||!a(t)&&!a(e)?t!==t&&e!==e:o(t,e,r,u,n,i))}var o=r(3),a=r(25);t.exports=n},function(t,e,r){function n(t,e,r,n,m,h){var g=c(t),_=c(e),y=g?x:f(t),O=_?x:f(e);y=y==v?d:y,O=O==v?d:O;var j=y==d,D=O==d,P=y==O;if(P&&s(t)){if(!s(e))return!1;g=!0,j=!1}if(P&&!j)return h||(h=new o),g||p(t)?a(t,e,r,n,m,h):u(t,e,y,r,n,m,h);if(!(r&l)){var S=j&&b.call(t,"__wrapped__"),w=D&&b.call(e,"__wrapped__");if(S||w){var M=S?t.value():t,N=w?e.value():e;return h||(h=new o),m(M,N,r,n,h)}}return!!P&&(h||(h=new o),i(t,e,r,n,m,h))}var o=r(4),a=r(12),u=r(18),i=r(19),f=r(22),c=r(14),s=r(23),p=r(24),l=1,v="[object Arguments]",x="[object Array]",d="[object Object]",m=Object.prototype,b=m.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(5),a=r(6),u=r(9),i=r(10),f=r(11);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=i,n.prototype.set=f,t.exports=n},function(t,e){function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return!(r<0)&&(r==e.length-1?e.pop():u.call(e,r,1),--this.size,!0)}var o=r(7),a=Array.prototype,u=a.splice;t.exports=n},function(t,e,r){function n(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}var o=r(8);t.exports=n},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}var o=r(7);t.exports=n},function(t,e,r){function n(t){return o(this.__data__,t)>-1}var o=r(7);t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(7);t.exports=n},function(t,e,r){function n(t,e,r,n,c,s){var p=r&i,l=t.length,v=e.length;if(l!=v&&!(p&&v>l))return!1;var x=s.get(t);if(x&&s.get(e))return x==e;var d=-1,m=!0,b=r&f?new o:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var h=t[d],g=e[d];if(n)var _=p?n(g,h,d,e,t,s):n(h,g,d,t,e,s);if(void 0!==_){if(_)continue;m=!1;break}if(b){if(!a(e,function(t,e){if(!u(b,e)&&(h===t||c(h,t,r,n,s)))return b.push(e)})){m=!1;break}}else if(h!==g&&!c(h,g,r,n,s)){m=!1;break}}return s.delete(t),s.delete(e),m}var o=r(13),a=r(15),u=r(16),i=1,f=2;t.exports=n},function(t,e,r){function n(){if(!arguments.length)return[];var t=arguments[0];return o(t)?t:[t]}var o=r(14);t.exports=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(17);t.exports=n},function(t,e){function r(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}t.exports=r},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t,e,r,n,u,f){var c=r&a,s=o(t),p=s.length;if(p!=o(e).length&&!c)return!1;for(var l=p;l--;){var v=s[l];if(!(c?v in e:i.call(e,v)))return!1}var x=f.get(t);if(x&&f.get(e))return x==e;var d=!0;f.set(t,e),f.set(e,t);for(var m=c;++l<p;){v=s[l];var b=t[v],h=e[v];if(n)var g=c?n(h,b,v,e,t,f):n(b,h,v,t,e,f);if(!(void 0===g?b===h||u(b,h,r,n,f):g)){d=!1;break}m||(m="constructor"==v)}if(d&&!m){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(d=!1)}return f.delete(t),f.delete(e),d}var o=r(20),a=1,u=Object.prototype,i=u.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(21),o=n(Object.keys,Object);t.exports=o},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e){function r(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(17);t.exports=n}])});