/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=r(1),a=n(o),u=r(26),i=n(u),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};!function(t,e){function r(t){return t.indexOf("mboxDefault")===-1?(t?t+" ":"")+"mboxDefault":t}function n(t){return t.replace(/\bmboxDefault\b/,"")}function o(t){t=t||{};var e=null;return Object.keys(t).filter(function(t){return t.startsWith("data-")&&!(0,i.default)(["data-mbox","data-timeout"],t)}).forEach(function(r,n){0===n&&(e={}),e[r.substring(5)]=t[r]}),e}function u(t,e,r,n){return!(0,a.default)(t.state.atParams,n)||e&&t.state.mbox!==e||r&&t.state.timeout!==r}function s(t,r){r.log("getOffers"),e.getOffer({mbox:t.state.mbox,params:t.state.atParams,timeout:t.state.timeout,success:function(e){t.setState({gotOffers:!0,offerData:e})},error:function(e,o){r.error("getOffer error: ",o,e),t.mboxDiv.className=n(t.mboxDiv.className)}})}function c(t){return t=t||{},{atParams:t.params||null}}function l(t,e){return t=t||{},{className:"mboxDefault","data-mbox":t.mbox||e.globalMboxName,"data-timeout":t.timeout||e.timeout}}function p(e){return t.createElement("div",f({ref:function(t){e.mboxDiv=t}},e.props,{className:r(e.props.className)}),e.props.children)}function v(t,e){e.log("MboxComponentDidMount"),t.setState({atParams:o(t.props),mbox:t.props["data-mbox"],timeout:parseInt(t.props["data-timeout"],10),shouldRefresh:!0})}function m(t,e){var r=e["data-mbox"],n=parseInt(e["data-timeout"],10),a=o(e);u(t,r,n,a)&&t.setState({atParams:a||t.state.atParams,mbox:r||t.state.mbox,timeout:n||t.state.timeout,shouldRefresh:!0})}function x(t,e){e.log("MboxComponentDidUpdate"),t.state&&(t.state.gotOffers&&(e.log("Applying"),adobe.target.applyOffer({mbox:t.state.mbox,offer:t.state.offerData,element:t.mboxDiv}),t.mboxDiv.className=n(t.mboxDiv.className),t.setState({gotOffers:!1})),t.state.shouldRefresh&&(e.log("Refreshing"),s(t,e),t.setState({shouldRefresh:!1})))}e.registerExtension({name:"react.createMboxComponent",modules:["settings","logger"],register:function(e,r){return function(n){return t.createClass({getInitialState:function(){return c(n)},getDefaultProps:function(){return l(n,e)},render:function(){return p(this)},componentDidMount:function(){return v(this,r)},componentWillReceiveProps:function(t){return m(this,t)},componentDidUpdate:function(){return x(this,r)}})}}})}(React,adobe.target)},function(t,e,r){function n(t,e){return o(t,e)}var o=r(2);t.exports=n},function(t,e,r){function n(t,e,r,u,i){return t===e||(null==t||null==e||!a(t)&&!a(e)?t!==t&&e!==e:o(t,e,r,u,n,i))}var o=r(3),a=r(25);t.exports=n},function(t,e,r){function n(t,e,r,n,d,h){var g=s(t),_=s(e),y=g?m:f(t),O=_?m:f(e);y=y==v?x:y,O=O==v?x:O;var D=y==x,j=O==x,P=y==O;if(P&&c(t)){if(!c(e))return!1;g=!0,D=!1}if(P&&!D)return h||(h=new o),g||l(t)?a(t,e,r,n,d,h):u(t,e,y,r,n,d,h);if(!(r&p)){var w=D&&b.call(t,"__wrapped__"),N=j&&b.call(e,"__wrapped__");if(w||N){var M=w?t.value():t,R=N?e.value():e;return h||(h=new o),d(M,R,r,n,h)}}return!!P&&(h||(h=new o),i(t,e,r,n,d,h))}var o=r(4),a=r(12),u=r(18),i=r(19),f=r(22),s=r(14),c=r(23),l=r(24),p=1,v="[object Arguments]",m="[object Array]",x="[object Object]",d=Object.prototype,b=d.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(5),a=r(6),u=r(9),i=r(10),f=r(11);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=i,n.prototype.set=f,t.exports=n},function(t,e){function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return!(r<0)&&(r==e.length-1?e.pop():u.call(e,r,1),--this.size,!0)}var o=r(7),a=Array.prototype,u=a.splice;t.exports=n},function(t,e,r){function n(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}var o=r(8);t.exports=n},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}var o=r(7);t.exports=n},function(t,e,r){function n(t){return o(this.__data__,t)>-1}var o=r(7);t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(7);t.exports=n},function(t,e,r){function n(t,e,r,n,s,c){var l=r&i,p=t.length,v=e.length;if(p!=v&&!(l&&v>p))return!1;var m=c.get(t);if(m&&c.get(e))return m==e;var x=-1,d=!0,b=r&f?new o:void 0;for(c.set(t,e),c.set(e,t);++x<p;){var h=t[x],g=e[x];if(n)var _=l?n(g,h,x,e,t,c):n(h,g,x,t,e,c);if(void 0!==_){if(_)continue;d=!1;break}if(b){if(!a(e,function(t,e){if(!u(b,e)&&(h===t||s(h,t,r,n,c)))return b.push(e)})){d=!1;break}}else if(h!==g&&!s(h,g,r,n,c)){d=!1;break}}return c.delete(t),c.delete(e),d}var o=r(13),a=r(15),u=r(16),i=1,f=2;t.exports=n},function(t,e,r){function n(){if(!arguments.length)return[];var t=arguments[0];return o(t)?t:[t]}var o=r(14);t.exports=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(17);t.exports=n},function(t,e){function r(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}t.exports=r},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t,e,r,n,u,f){var s=r&a,c=o(t),l=c.length;if(l!=o(e).length&&!s)return!1;for(var p=l;p--;){var v=c[p];if(!(s?v in e:i.call(e,v)))return!1}var m=f.get(t);if(m&&f.get(e))return m==e;var x=!0;f.set(t,e),f.set(e,t);for(var d=s;++p<l;){v=c[p];var b=t[v],h=e[v];if(n)var g=s?n(h,b,v,e,t,f):n(b,h,v,t,e,f);if(!(void 0===g?b===h||u(b,h,r,n,f):g)){x=!1;break}d||(d="constructor"==v)}if(x&&!d){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(x=!1)}return f.delete(t),f.delete(e),x}var o=r(20),a=1,u=Object.prototype,i=u.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(21),o=n(Object.keys,Object);t.exports=o},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e){function r(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){function n(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=r(17);t.exports=n}]);