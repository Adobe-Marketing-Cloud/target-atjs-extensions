/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,o,t){"use strict";function n(e,o){o.forEach(function(o){e.requires.indexOf(o)===-1&&e.requires.push(o)})}function r(e){e.directive("mbox",["logger","options","offerService",function(e,o,t){return{restrict:"AE",link:{pre:function(e,o){o.addClass("mboxDefault")},post:function(n,r,i){t.getOfferPromise({mbox:i.mboxname,params:o.params,timeout:o.timeout,selector:o.selector||r[0]}).then(t.applyOfferPromise)["catch"](function(o){e.error("mboxDirective error: "+o)})["finally"](function(){r.removeClass("mboxDefault")})}}}}])}function i(o){return e.querySelectorAll(o)}function a(e,o,t,n){return e.isRouteAllowed(o)&&!i("#"+n).length&&i(t.selector).length>0}function c(e,o,t,n,r){if(n.appendToSelector){var i=e('<div id="'+r+'" mbox data-mboxname="'+n.mbox+'"></div>')(t);o.append(i)}else o.attr("mbox",""),o.attr("data-mboxname",n.mbox),o.attr("id",r),e(o)(t)}function u(e){e.run(["$rootScope","$injector","$location","$compile","routeService","options","logger",function(e,t,n,r,u,l,m){e.$on("$viewContentLoaded",function(e,t,f){var d=n.path();m.log("$viewContentLoaded "+d);var s=l.mbox+"-dir";if(a(u,d,l,s)){var p=o.element(i(l.selector));c(r,p,p.scope(),l,s),m.log((l.appendToSelector?"appended":"created")+" mbox directive",l.mbox)}})}])}t.ext.angular.initDirective=function(e,i){t.ext.angular.setupCommon(i);var a="string"==typeof e?o.module(e):e;n(a,["target.angular.common"]),r(a),u(a)}}(document,angular,adobe.target);