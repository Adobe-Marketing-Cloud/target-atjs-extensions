/**
 * Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function r(e){if(n[e])return n[e].exports;var o=n[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,r,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}var o=n(1),u=e(o),a=n(35),i=e(a),c=n(48),f=e(c),s=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t};!function(t,r){function n(t){return(t?t+" ":"")+"mboxDefault"}function e(t){return t.replace(/\bmboxDefault\b/,"")}function o(t){t=t||{};var r=null;return Object.keys(t).filter(function(t){return t.startsWith("data-")&&!(0,f.default)(["data-mbox","data-timeout"],t)}).forEach(function(n,e){0===e&&(r={}),r[n]=t[n]}),r}function a(t,r,n,e){return!(0,i.default)(t.state.atParams,e)||r&&t.state.mbox!==r||n&&t.state.timeout!==n}function c(t,n){n.log("getOffers"),r.getOffer({mbox:t.state.mbox,params:(0,u.default)(t.state.atParams),timeout:t.state.timeout,success:function(r){t.setState({gotOffers:!0,offerData:r})},error:function(r,o){n.error("getOffer error: ",o,r),t.mboxDiv.className=e(t.mboxDiv.className)}})}function p(t){return t=t||{},{atParams:t.params||null}}function l(t,r){return t=t||{},{className:"mboxDefault","data-mbox":t.mbox||r.globalMboxName,"data-timeout":t.timeout||r.timeout}}function v(r){return t.createElement("div",s({ref:function(t){r.mboxDiv=t}},r.props,{className:n(r.props.className)}),r.props.children)}function x(t,r){r.log("MboxComponentDidMount"),t.setState({atParams:o(t.props),mbox:t.props["data-mbox"],timeout:parseInt(t.props["data-timeout"],10),shouldRefresh:!0})}function b(t,r){var n=r["data-mbox"],e=parseInt(r["data-timeout"],10),u=o(r);a(t,n,e,u)&&t.setState({atParams:u||t.state.atParams,mbox:n||t.state.mbox,timeout:e||t.state.timeout,shouldRefresh:!0})}function d(t,r){r.log("MboxComponentDidUpdate"),t.state&&(t.state.gotOffers&&(r.log("Applying"),adobe.target.applyOffer({mbox:t.state.mbox,offer:t.state.offerData,element:t.mboxDiv}),t.mboxDiv.className=e(t.mboxDiv.className),t.setState({gotOffers:!1})),t.state.shouldRefresh&&(r.log("Refreshing"),c(t,r),t.setState({shouldRefresh:!1})))}r.registerExtension({name:"react.createMboxComponent",modules:["settings","logger"],register:function(r,n){return function(e){return t.createClass({getInitialState:function(){return p(e)},getDefaultProps:function(){return l(e,r)},render:function(){return v(this)},componentDidMount:function(){return x(this,n)},componentWillReceiveProps:function(t){return b(this,t)},componentDidUpdate:function(){return d(this,n)}})}}})}(React,adobe.target)},function(t,r,n){function e(t){return o(t,!1,!0)}var o=n(2);t.exports=e},function(t,r,n){function e(t,r,n,j,O,A,D){var S;if(j&&(S=A?j(t,O,A,D):j(t)),void 0!==S)return S;if(!g(t))return t;var M=d(t);if(M){if(S=v(t),!r)return f(t,S)}else{var R=l(t),k=R==w||R==P;if(h(t))return c(t,r);if(R==N||R==_||k&&!A){if(m(t))return A?t:{};if(S=b(k?{}:t),!r)return s(t,i(S,t))}else{if(!L[R])return A?t:{};S=x(t,R,e,r)}}D||(D=new o);var I=D.get(t);if(I)return I;if(D.set(t,S),!M)var U=n?p(t):y(t);return u(U||t,function(o,u){U&&(u=o,o=t[u]),a(S,u,e(o,r,n,j,u,t,D))}),S}var o=n(3),u=n(11),a=n(12),i=n(13),c=n(17),f=n(18),s=n(19),p=n(21),l=n(25),v=n(26),x=n(27),b=n(28),d=n(24),h=n(33),m=n(34),g=n(30),y=n(15),_="[object Arguments]",j="[object Array]",O="[object Boolean]",A="[object Date]",D="[object Error]",w="[object Function]",P="[object GeneratorFunction]",S="[object Map]",M="[object Number]",N="[object Object]",R="[object RegExp]",k="[object Set]",I="[object String]",U="[object Symbol]",C="[object WeakMap]",E="[object ArrayBuffer]",F="[object DataView]",W="[object Float32Array]",B="[object Float64Array]",G="[object Int8Array]",V="[object Int16Array]",q="[object Int32Array]",z="[object Uint8Array]",H="[object Uint8ClampedArray]",J="[object Uint16Array]",K="[object Uint32Array]",L={};L[_]=L[j]=L[E]=L[F]=L[O]=L[A]=L[W]=L[B]=L[G]=L[V]=L[q]=L[S]=L[M]=L[N]=L[R]=L[k]=L[I]=L[U]=L[z]=L[H]=L[J]=L[K]=!0,L[D]=L[w]=L[C]=!1,t.exports=e},function(t,r,n){function e(t){var r=-1,n=t?t.length:0;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}var o=n(4),u=n(5),a=n(8),i=n(9),c=n(10);e.prototype.clear=o,e.prototype.delete=u,e.prototype.get=a,e.prototype.has=i,e.prototype.set=c,t.exports=e},function(t,r){function n(){this.__data__=[]}t.exports=n},function(t,r,n){function e(t){var r=this.__data__,n=o(r,t);if(n<0)return!1;var e=r.length-1;return n==e?r.pop():a.call(r,n,1),!0}var o=n(6),u=Array.prototype,a=u.splice;t.exports=e},function(t,r,n){function e(t,r){for(var n=t.length;n--;)if(o(t[n][0],r))return n;return-1}var o=n(7);t.exports=e},function(t,r){function n(t,r){return t===r||t!==t&&r!==r}t.exports=n},function(t,r,n){function e(t){var r=this.__data__,n=o(r,t);return n<0?void 0:r[n][1]}var o=n(6);t.exports=e},function(t,r,n){function e(t){return o(this.__data__,t)>-1}var o=n(6);t.exports=e},function(t,r,n){function e(t,r){var n=this.__data__,e=o(n,t);return e<0?n.push([t,r]):n[e][1]=r,this}var o=n(6);t.exports=e},function(t,r){function n(t,r){for(var n=-1,e=t?t.length:0;++n<e&&r(t[n],n,t)!==!1;);return t}t.exports=n},function(t,r,n){function e(t,r,n){var e=t[r];a.call(t,r)&&o(e,n)&&(void 0!==n||r in t)||(t[r]=n)}var o=n(7),u=Object.prototype,a=u.hasOwnProperty;t.exports=e},function(t,r,n){function e(t,r){return t&&o(r,u(r),t)}var o=n(14),u=n(15);t.exports=e},function(t,r,n){function e(t,r,n,e){n||(n={});for(var u=-1,a=r.length;++u<a;){var i=r[u],c=e?e(n[i],t[i],i,n,t):void 0;o(n,i,void 0===c?t[i]:c)}return n}var o=n(12);t.exports=e},function(t,r,n){var e=n(16),o=e(Object.keys,Object);t.exports=o},function(t,r){function n(t,r){return function(n){return t(r(n))}}t.exports=n},function(t,r){function n(t,r){if(r)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}t.exports=n},function(t,r){function n(t,r){var n=-1,e=t.length;for(r||(r=Array(e));++n<e;)r[n]=t[n];return r}t.exports=n},function(t,r,n){function e(t,r){return o(t,u(t),r)}var o=n(14),u=n(20);t.exports=e},function(t,r){function n(){return[]}t.exports=n},function(t,r,n){function e(t){return o(t,a,u)}var o=n(22),u=n(20),a=n(15);t.exports=e},function(t,r,n){function e(t,r,n){var e=r(t);return u(t)?e:o(e,n(t))}var o=n(23),u=n(24);t.exports=e},function(t,r){function n(t,r){for(var n=-1,e=r.length,o=t.length;++n<e;)t[o+n]=r[n];return t}t.exports=n},function(t,r){var n=Array.isArray;t.exports=n},function(t,r){function n(t){return o.call(t)}var e=Object.prototype,o=e.toString;t.exports=n},function(t,r){function n(t){var r=t.length,n=t.constructor(r);return r&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var e=Object.prototype,o=e.hasOwnProperty;t.exports=n},function(t,r){function n(t){return t}t.exports=n},function(t,r,n){function e(t){return"function"!=typeof t.constructor||a(t)?{}:o(u(t))}var o=n(29),u=n(31),a=n(32);t.exports=e},function(t,r,n){function e(t){return o(t)?u(t):{}}var o=n(30),u=Object.create;t.exports=e},function(t,r){function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=n},function(t,r,n){var e=n(16),o=e(Object.getPrototypeOf,Object);t.exports=o},function(t,r){function n(){return!1}t.exports=n},function(t,r){function n(){return!1}t.exports=n},function(t,r){function n(){return!1}t.exports=n},function(t,r,n){function e(t,r){return o(t,r)}var o=n(36);t.exports=e},function(t,r,n){function e(t,r,n,i,c){return t===r||(null==t||null==r||!u(t)&&!a(r)?t!==t&&r!==r:o(t,r,e,n,i,c))}var o=n(37),u=n(30),a=n(47);t.exports=e},function(t,r,n){function e(t,r,n,e,d,m){var g=f(t),y=f(r),_=x,j=x;g||(_=c(t),_=_==v?b:_),y||(j=c(r),j=j==v?b:j);var O=_==b&&!s(t),A=j==b&&!s(r),D=_==j;if(D&&!O)return m||(m=new o),g||p(t)?u(t,r,n,e,d,m):a(t,r,_,n,e,d,m);if(!(d&l)){var w=O&&h.call(t,"__wrapped__"),P=A&&h.call(r,"__wrapped__");if(w||P){var S=w?t.value():t,M=P?r.value():r;return m||(m=new o),n(S,M,e,d,m)}}return!!D&&(m||(m=new o),i(t,r,n,e,d,m))}var o=n(3),u=n(38),a=n(44),i=n(45),c=n(25),f=n(24),s=n(34),p=n(46),l=2,v="[object Arguments]",x="[object Array]",b="[object Object]",d=Object.prototype,h=d.hasOwnProperty;t.exports=e},function(t,r,n){function e(t,r,n,e,c,f){var s=c&i,p=t.length,l=r.length;if(p!=l&&!(s&&l>p))return!1;var v=f.get(t);if(v&&f.get(r))return v==r;var x=-1,b=!0,d=c&a?new o:void 0;for(f.set(t,r),f.set(r,t);++x<p;){var h=t[x],m=r[x];if(e)var g=s?e(m,h,x,r,t,f):e(h,m,x,t,r,f);if(void 0!==g){if(g)continue;b=!1;break}if(d){if(!u(r,function(t,r){if(!d.has(r)&&(h===t||n(h,t,e,c,f)))return d.add(r)})){b=!1;break}}else if(h!==m&&!n(h,m,e,c,f)){b=!1;break}}return f.delete(t),f.delete(r),b}var o=n(39),u=n(43),a=1,i=2;t.exports=e},function(t,r,n){function e(t){var r=-1,n=t?t.length:0;for(this.__data__=new o;++r<n;)this.add(t[r])}var o=n(40),u=n(41),a=n(42);e.prototype.add=e.prototype.push=u,e.prototype.has=a,t.exports=e},function(t,r,n){function e(t){var r=-1,n=t?t.length:0;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}var o=n(4),u=n(5),a=n(8),i=n(9),c=n(10);e.prototype.clear=o,e.prototype.delete=u,e.prototype.get=a,e.prototype.has=i,e.prototype.set=c,t.exports=e},function(t,r){function n(t){return this.__data__.set(t,e),this}var e="__lodash_hash_undefined__";t.exports=n},function(t,r){function n(t){return this.__data__.has(t)}t.exports=n},function(t,r){function n(t,r){for(var n=-1,e=t?t.length:0;++n<e;)if(r(t[n],n,t))return!0;return!1}t.exports=n},function(t,r){function n(t,r){return t===r||t!==t&&r!==r}t.exports=n},function(t,r,n){function e(t,r,n,e,a,c){var f=a&u,s=o(t),p=s.length,l=o(r),v=l.length;if(p!=v&&!f)return!1;for(var x=p;x--;){var b=s[x];if(!(f?b in r:i.call(r,b)))return!1}var d=c.get(t);if(d&&c.get(r))return d==r;var h=!0;c.set(t,r),c.set(r,t);for(var m=f;++x<p;){b=s[x];var g=t[b],y=r[b];if(e)var _=f?e(y,g,b,r,t,c):e(g,y,b,t,r,c);if(!(void 0===_?g===y||n(g,y,e,a,c):_)){h=!1;break}m||(m="constructor"==b)}if(h&&!m){var j=t.constructor,O=r.constructor;j!=O&&"constructor"in t&&"constructor"in r&&!("function"==typeof j&&j instanceof j&&"function"==typeof O&&O instanceof O)&&(h=!1)}return c.delete(t),c.delete(r),h}var o=n(15),u=2,a=Object.prototype,i=a.hasOwnProperty;t.exports=e},function(t,r){function n(){return!1}t.exports=n},function(t,r){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,r,n){function e(t,r){var n=t?t.length:0;return!!n&&o(t,r,0)>-1}var o=n(49);t.exports=e},function(t,r,n){function e(t,r,n){if(r!==r)return o(t,u,n);for(var e=n-1,a=t.length;++e<a;)if(t[e]===r)return e;return-1}var o=n(50),u=n(51);t.exports=e},function(t,r){function n(t,r,n,e){for(var o=t.length,u=n+(e?1:-1);e?u--:++u<o;)if(r(t[u],u,t))return u;return-1}t.exports=n},function(t,r){function n(t){return t!==t}t.exports=n}]);